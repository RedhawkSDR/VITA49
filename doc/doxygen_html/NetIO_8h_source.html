<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VRT: cpp_src/vrt/net/NetIO.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_d89bddcbea8627bd614e469eff23c807.html">cpp_src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4bc80685627bb56d74fc873ad9fe5052.html">vrt</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_088bffec29e79b066a12419492895131.html">net</a>
  </div>
</div>
<div class="contents">
<h1>NetIO.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ===================== COPYRIGHT NOTICE =====================</span>
<a name="l00002"></a>00002 <span class="comment"> * This file is protected by Copyright. Please refer to the COPYRIGHT file</span>
<a name="l00003"></a>00003 <span class="comment"> * distributed with this source distribution.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This file is part of REDHAWK.</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * REDHAWK is free software: you can redistribute it and/or modify it</span>
<a name="l00008"></a>00008 <span class="comment"> * under the terms of the GNU Lesser General Public License as published by the</span>
<a name="l00009"></a>00009 <span class="comment"> * Free Software Foundation, either version 3 of the License, or (at your</span>
<a name="l00010"></a>00010 <span class="comment"> * option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * REDHAWK is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00013"></a>00013 <span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<a name="l00014"></a>00014 <span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * for more details.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00018"></a>00018 <span class="comment"> * along with this program. If not, see http://www.gnu.org/licenses/.</span>
<a name="l00019"></a>00019 <span class="comment"> * ============================================================</span>
<a name="l00020"></a>00020 <span class="comment"> */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#ifndef _NetIO_h</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define _NetIO_h</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;NetUtilities.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;Threadable.h&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;VRTContextListener.h&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;VRTObject.h&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;queue&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="keyword">using namespace </span>std;
<a name="l00032"></a>00032 
<a name="l00034"></a>00034 <span class="preprocessor">#define listenerSupport_fireErrorOccurred(...) \</span>
<a name="l00035"></a>00035 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;errorOccurred(event, Utilities::format(__VA_ARGS__), VRTException()); }</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="preprocessor">#define listenerSupport_fireErrorOccurredErr(msg,t) \</span>
<a name="l00038"></a>00038 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;errorOccurred(event, msg, t); }</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="preprocessor">#define listenerSupport_fireErrorOccurredPkt(msg,t,p) \</span>
<a name="l00041"></a>00041 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;errorOccurred(VRTEvent(this,p), msg, t); }</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="preprocessor">#define listenerSupport_fireWarningOccurred(...) \</span>
<a name="l00044"></a>00044 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;warningOccurred(event, Utilities::format(__VA_ARGS__), VRTException()); }</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#define listenerSupport_fireWarningOccurredErr(msg,t) \</span>
<a name="l00047"></a>00047 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;warningOccurred(event, msg, t); }</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a>00049 <span class="preprocessor">#define listenerSupport_fireWarningOccurredPkt(msg,t,p) \</span>
<a name="l00050"></a>00050 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;errorOccurred(VRTEvent(this,p), msg, t); }</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 <span class="preprocessor">#define listenerSupport_fireSentPacket(pkt) \</span>
<a name="l00053"></a>00053 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;sentPacket(event, pkt); }</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a>00055 <span class="preprocessor">#define listenerSupport_fireSentPackets(frame) \</span>
<a name="l00056"></a>00056 <span class="preprocessor">  if (evtListener != NULL) { \</span>
<a name="l00057"></a>00057 <span class="preprocessor">    vector&lt;BasicVRTPacket*&gt; pkts = frame-&gt;getVRTPackets(); \</span>
<a name="l00058"></a>00058 <span class="preprocessor">    for (size_t i = 0; i &lt; pkts.size(); i++) { \</span>
<a name="l00059"></a>00059 <span class="preprocessor">      evtListener-&gt;sentPacket(event, pkts[i]); \</span>
<a name="l00060"></a>00060 <span class="preprocessor">    } \</span>
<a name="l00061"></a>00061 <span class="preprocessor">  }</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>
<a name="l00063"></a>00063 <span class="preprocessor">#define listenerSupport_fireReceivedPacket(pkt) \</span>
<a name="l00064"></a>00064 <span class="preprocessor">  if (evtListener != NULL) { evtListener-&gt;receivedPacket(event, pkt); }</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a>00066 <span class="preprocessor">#define listenerSupport_fireReceivedDataPacket(pkt) \</span>
<a name="l00067"></a>00067 <span class="preprocessor">       if (ctxListener != NULL) { ctxListener-&gt;receivedDataPacket(event, checked_dynamic_cast&lt;BasicDataPacket*&gt;(pkt)); } \</span>
<a name="l00068"></a>00068 <span class="preprocessor">  else if (evtListener != NULL) { evtListener-&gt;receivedPacket(event, pkt); }</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00070"></a>00070 <span class="preprocessor">#define listenerSupport_fireReceivedContextPacket(pkt) \</span>
<a name="l00071"></a>00071 <span class="preprocessor">       if (ctxListener != NULL) { ctxListener-&gt;receivedContextPacket(event, pkt); } \</span>
<a name="l00072"></a>00072 <span class="preprocessor">  else if (evtListener != NULL) { evtListener-&gt;receivedPacket(event, pkt); }</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a>00074 <span class="keyword">namespace </span>vrt {
<a name="l00083"></a><a class="code" href="classvrt_1_1NetIO.html">00083</a>   <span class="keyword">class </span><a class="code" href="classvrt_1_1NetIO.html" title="Internal Use Only: Provides the basic network I/O functions used by both VRTReader...">NetIO</a> : <span class="keyword">public</span> <a class="code" href="classvrt_1_1Threadable.html" title="Utility class that handles common issues regarding threadable objects.">Threadable</a> {
<a name="l00085"></a>00085     <span class="keyword">class </span>QueuedPacketHandler : <span class="keyword">public</span> <a class="code" href="classvrt_1_1Threadable.html" title="Utility class that handles common issues regarding threadable objects.">Threadable</a> {
<a name="l00086"></a>00086       <span class="keyword">private</span>:          <a class="code" href="classvrt_1_1NetIO.html" title="Internal Use Only: Provides the basic network I/O functions used by both VRTReader...">NetIO</a> *netIO;
<a name="l00087"></a>00087       <span class="keyword">private</span>: <span class="keyword">volatile</span> <span class="keywordtype">bool</span>   stopIfClear;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089       <span class="keyword">public</span>: QueuedPacketHandler (<a class="code" href="classvrt_1_1NetIO.html" title="Internal Use Only: Provides the basic network I/O functions used by both VRTReader...">NetIO</a> *netIO);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091       <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a1a74c4e2e582d3b3819b18ae0e79881a" title="Runs the thread.">runThread</a> ();
<a name="l00092"></a>00092 
<a name="l00094"></a>00094       <span class="keyword">public</span>: <span class="keywordtype">void</span> stopWhenClear ();
<a name="l00095"></a>00095     };
<a name="l00096"></a>00096     <span class="keyword">friend</span> <span class="keyword">class </span>QueuedPacketHandler;
<a name="l00097"></a>00097 
<a name="l00099"></a><a class="code" href="classvrt_1_1NetIO.html#af91dfdf3e52f2537988b6c4fc17280f1">00099</a>     <span class="keyword">protected</span>: <span class="keyword">static</span> vector&lt;char&gt; *<a class="code" href="classvrt_1_1NetIO.html#af91dfdf3e52f2537988b6c4fc17280f1" title="Indicates that a buffer was already handled.">BUFFER_PUSHED</a>;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>                    isOutput;            <span class="comment">// Is this an output device?</span>
<a name="l00102"></a>00102     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1VRTEventListener.html" title="The function definitions for a listener for VRT events.">VRTEventListener</a>       *evtListener;         <span class="comment">// The listener to send to (NULL if n/a)</span>
<a name="l00103"></a>00103     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1VRTContextListener.html" title="An extension to the normal VRTEventListener that supports additional handling for...">VRTContextListener</a>     *ctxListener;         <span class="comment">// The listener to send to (NULL if n/a)</span>
<a name="l00104"></a>00104     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1VRTEvent.html" title="A simple holder for event data.">VRTEvent</a>                event;               <span class="comment">// The event object to use</span>
<a name="l00105"></a>00105     <span class="keyword">protected</span>: TransportProtocol       transport;           <span class="comment">// Network transport protocol</span>
<a name="l00106"></a>00106     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1InetAddress.html" title="An IPv4 or IPv6 Internet address.">InetAddress</a>             hostAddr;            <span class="comment">// Network host address (host:port)</span>
<a name="l00107"></a>00107     <span class="keyword">protected</span>: <span class="keywordtype">string</span>                  host;                <span class="comment">// Network host</span>
<a name="l00108"></a>00108     <span class="keyword">protected</span>: int32_t                 port;                <span class="comment">// Network port</span>
<a name="l00109"></a>00109     <span class="keyword">protected</span>: <span class="keywordtype">string</span>                  device;              <span class="comment">// Name of network device</span>
<a name="l00110"></a>00110     <span class="keyword">protected</span>: vector&lt;char&gt;            buffer;              <span class="comment">// Data buffer</span>
<a name="l00111"></a>00111     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1Socket.html" title="Internal Use Only: Class to hold a BSD-style socket with accompanying information...">Socket</a>                 *datagramSocket;      <span class="comment">// UDP socket</span>
<a name="l00112"></a>00112     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1Socket.html" title="Internal Use Only: Class to hold a BSD-style socket with accompanying information...">Socket</a>                 *tcpServerSocket;     <span class="comment">// TCP server socket</span>
<a name="l00113"></a>00113     <span class="keyword">protected</span>: vector&lt;Socket*&gt;        *tcpSockets;          <span class="comment">// TCP client socket(s)</span>
<a name="l00114"></a>00114     <span class="keyword">protected</span>: int64_t                 tcpServerCheck;      <span class="comment">// Next time to check for TCP server socket</span>
<a name="l00115"></a>00115     <span class="keyword">protected</span>: map&lt;string,string&gt;      socketOptions;       <span class="comment">// The socket options</span>
<a name="l00116"></a>00116     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>                    reconnectNow;        <span class="comment">// Is a reconnect needed?</span>
<a name="l00117"></a>00117     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>                    reconnectDone;       <span class="comment">// Is the reconnect done?</span>
<a name="l00118"></a>00118     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1VRTException.html" title="A basic exception definition.">VRTException</a>            reconnectError;      <span class="comment">// Error detected on reconnect</span>
<a name="l00119"></a>00119     <span class="keyword">protected</span>: int32_t                 frameCounter;        <span class="comment">// Frame counter</span>
<a name="l00120"></a>00120     <span class="keyword">protected</span>: map&lt;int64_t,int32_t&gt;    packetCounters;      <span class="comment">// Packet counters</span>
<a name="l00121"></a>00121     <span class="keyword">protected</span>: queue&lt;vector&lt;char&gt;*&gt;    packetsReadIn;       <span class="comment">// Queue of packets read in</span>
<a name="l00122"></a>00122     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1VRTObject.html" title="A basic root-level object definition.">VRTObject</a>               packetsReadInLock;   <span class="comment">// Lock object for packetsReadIn</span>
<a name="l00123"></a>00123     <span class="keyword">protected</span>: int32_t                 lengthReadIn;        <span class="comment">// Total length read in</span>
<a name="l00124"></a>00124     <span class="keyword">protected</span>: QueuedPacketHandler    *queuedPacketHandler; <span class="comment">// Handler for the queued packets</span>
<a name="l00125"></a>00125     <span class="keyword">protected</span>: int32_t                 queueLimitPackets;   <span class="comment">// Queued packet limit in packets</span>
<a name="l00126"></a>00126     <span class="keyword">protected</span>: int32_t                 queueLimitOctets;    <span class="comment">// Queued packet limit in octets</span>
<a name="l00127"></a>00127     <span class="keyword">protected</span>: int32_t                 doShutdown;          <span class="comment">// Shutdown stage (1=Indicated, 2=InProgress)</span>
<a name="l00128"></a>00128 
<a name="l00160"></a>00160     <span class="keyword">public</span>: <a class="code" href="classvrt_1_1NetIO.html#af37b36116b7d3c08a09258563e95cafa" title="Creates a new instance.">NetIO</a> (<span class="keywordtype">bool</span> isOutput, TransportProtocol transport,
<a name="l00161"></a>00161                    <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;host, int32_t port, <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;device,
<a name="l00162"></a>00162                    <a class="code" href="classvrt_1_1VRTEventListener.html" title="The function definitions for a listener for VRT events.">VRTEventListener</a> *listener, <span class="keyword">const</span> map&lt;string,string&gt; &amp;options,
<a name="l00163"></a>00163                    int32_t bufLength);
<a name="l00164"></a>00164 
<a name="l00166"></a>00166     <span class="keyword">public</span>: <span class="keyword">virtual</span> <a class="code" href="classvrt_1_1NetIO.html#ac66344152297f7832d63409c673fdcac" title="Destructor.">~NetIO</a> ();
<a name="l00167"></a>00167 
<a name="l00171"></a>00171     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classvrt_1_1NetIO.html#a1e4bf123c34691e84885ee5b83ab5ff4" title="Provides a description of the instance useful for debugging.">toString</a> () <span class="keyword">const</span>;
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 
<a name="l00174"></a>00174     <span class="keyword">public</span>:    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#ac1eb2071e7382c2f8379418347eed45b" title="Starts the object running in a new thread.">start</a> ();
<a name="l00175"></a>00175     <span class="keyword">public</span>:    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a2830e8273c1dbaa9d46e5a7120d2725a" title="Tells the object to stop running.">stop</a> (<span class="keywordtype">bool</span> wait=<span class="keyword">true</span>);
<a name="l00176"></a>00176     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a43310a84a1e2d5c219aa1ccc31d789cd" title="Closes any connections, This will always be called at the end of a call to run()...">shutdown</a> ();
<a name="l00177"></a>00177 
<a name="l00179"></a>00179     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a2cd1d407a0df2acf391895a40f42799c" title="Closes the sockets.">openSockets</a> ();
<a name="l00180"></a>00180 
<a name="l00185"></a>00185     <span class="keyword">protected</span>: <span class="keywordtype">bool</span> <a class="code" href="classvrt_1_1NetIO.html#ad3cce989e7d03733e1eb2a4aedd47df6" title="Checks the current sockets, reconnecting as needed.">checkSockets</a> ();
<a name="l00186"></a>00186 
<a name="l00190"></a>00190     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a2659351c35f5a907e3bf84d97c2b8d3d" title="Stops any future read/write on the sockets, but does not close them.">shutdownSockets</a> ();
<a name="l00191"></a>00191 
<a name="l00193"></a>00193     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a586e0ed1215bb3506964729b77d243dc" title="Closes the sockets.">closeSockets</a> ();
<a name="l00194"></a>00194 
<a name="l00196"></a>00196     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#ad1883b9f2039c7394caf34211bf74e47" title="Shutdown only the client sockets.">shutdownClientSockets</a> ();
<a name="l00197"></a>00197 
<a name="l00199"></a>00199     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#ab1fedfc2a7a0552b70fe75bf298a257e" title="Closes only the client sockets.">closeClientSockets</a> ();
<a name="l00200"></a>00200 
<a name="l00202"></a>00202     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a31bb39c68ae659470be2edc0637f35d0" title="Requests a reconnect and waits for it to be done.">reconnect</a> (<span class="keyword">const</span> <a class="code" href="classvrt_1_1VRTEventListener.html" title="The function definitions for a listener for VRT events.">VRTEventListener</a> &amp;warnings);
<a name="l00203"></a>00203 
<a name="l00204"></a><a class="code" href="classvrt_1_1NetIO.html#a1a74c4e2e582d3b3819b18ae0e79881a">00204</a>     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a1a74c4e2e582d3b3819b18ae0e79881a" title="Runs the thread.">runThread</a> () {
<a name="l00205"></a>00205       <span class="keywordflow">if</span> (isOutput) <a class="code" href="classvrt_1_1NetIO.html#affb1bbf3e96f099c14e211a26be53def" title="Version of runThread() for an output connection.">runOutputThread</a>();
<a name="l00206"></a>00206       <span class="keywordflow">else</span>          <a class="code" href="classvrt_1_1NetIO.html#a0b2f212a94b9d92cbb48205072b5a3a7" title="Version of runThread() for an input connection.">runInputThread</a>();
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208 
<a name="l00219"></a><a class="code" href="classvrt_1_1NetIO.html#a9c420b521ff47db33ca308ad4cbbac82">00219</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> int32_t <a class="code" href="classvrt_1_1NetIO.html#a9c420b521ff47db33ca308ad4cbbac82" title="Internal Use Only: Gets the number of active connections.">getActiveConnectionCount</a> () {
<a name="l00220"></a>00220       <span class="keywordflow">return</span> (tcpSockets != NULL)? (int32_t)tcpSockets-&gt;size() : -1;
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 
<a name="l00225"></a>00225     <span class="comment">// Functions to support output</span>
<a name="l00227"></a>00227 <span class="comment"></span>
<a name="l00228"></a>00228     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#affb1bbf3e96f099c14e211a26be53def" title="Version of runThread() for an output connection.">runOutputThread</a> ();
<a name="l00229"></a>00229 
<a name="l00233"></a><a class="code" href="classvrt_1_1NetIO.html#a4462cb54dff6a42a08386d0e4d9bb7f3">00233</a>     <span class="keyword">protected</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a4462cb54dff6a42a08386d0e4d9bb7f3" title="Sends the UDP datagram *or* TCP buffer of data.">sendBuffer</a> (int32_t len) {
<a name="l00234"></a>00234       <a class="code" href="classvrt_1_1NetIO.html#a4462cb54dff6a42a08386d0e4d9bb7f3" title="Sends the UDP datagram *or* TCP buffer of data.">sendBuffer</a>(&amp;buffer[0], len);
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236 
<a name="l00241"></a>00241     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a4462cb54dff6a42a08386d0e4d9bb7f3" title="Sends the UDP datagram *or* TCP buffer of data.">sendBuffer</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buf, int32_t len);
<a name="l00242"></a>00242 
<a name="l00244"></a>00244     <span class="comment">// Functions to support input</span>
<a name="l00246"></a>00246 <span class="comment"></span>
<a name="l00247"></a>00247     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a0b2f212a94b9d92cbb48205072b5a3a7" title="Version of runThread() for an input connection.">runInputThread</a> ();
<a name="l00248"></a>00248 
<a name="l00252"></a>00252     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a17ad0930971f17412d5135eab12628bf" title="Adds a set of packets to the processing queue.">pushPackets</a> (vector&lt;char&gt;* first, vector&lt;vector&lt;char&gt;*&gt; *rest);
<a name="l00253"></a>00253 
<a name="l00255"></a><a class="code" href="classvrt_1_1NetIO.html#a866137d4d0352078bc87696a09e326bb">00255</a>     <span class="keyword">protected</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a866137d4d0352078bc87696a09e326bb" title="Adds a packet to the processing queue.">pushPacket</a> (vector&lt;char&gt; *p) {
<a name="l00256"></a>00256       <a class="code" href="classvrt_1_1NetIO.html#a17ad0930971f17412d5135eab12628bf" title="Adds a set of packets to the processing queue.">pushPackets</a>(p, NULL);
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 
<a name="l00260"></a>00260     <span class="keyword">protected</span>: vector&lt;char&gt;* <a class="code" href="classvrt_1_1NetIO.html#a620213fe52adf0ffba6ff73ca3f51d32" title="Pops a packet off of the queue.">popPacket</a> ();
<a name="l00261"></a>00261 
<a name="l00263"></a>00263     <span class="keyword">protected</span>: <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#aa40f23a1dbbeeaa49020b204f0ced119" title="Pops a packet off of the queue.">clearQueue</a> ();
<a name="l00264"></a>00264 
<a name="l00270"></a>00270     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1NetIO.html#a3fde1e634f6b6d9955fe72542777aa34" title="Handles the packet read in.">handle</a> (vector&lt;char&gt; *buffer, int32_t length);
<a name="l00271"></a>00271 
<a name="l00283"></a>00283     <span class="keyword">protected</span>: vector&lt;char&gt;* <a class="code" href="classvrt_1_1NetIO.html#ad5dd9e183fbdc2981c26cd6113a9dc8c" title="Reads a single buffer from the input stream.">receiveBuffer</a> (<span class="keywordtype">bool</span> autoPush);
<a name="l00284"></a>00284 
<a name="l00286"></a>00286     <span class="keyword">protected</span>: <span class="keyword">virtual</span> vector&lt;char&gt;* <a class="code" href="classvrt_1_1NetIO.html#a551265c20fb443561b70763fac29bbb7" title="Receive a packet via UDP.">receiveBufferUDP</a> (<span class="keywordtype">bool</span> autoPush);
<a name="l00287"></a>00287 
<a name="l00289"></a>00289     <span class="keyword">protected</span>: <span class="keyword">virtual</span> vector&lt;char&gt;* <a class="code" href="classvrt_1_1NetIO.html#ae2ef7300feee7c63213b6c63a9a529b0" title="Receive a packet via UDP.">receiveBufferTCP</a> (<span class="keywordtype">bool</span> autoPush);
<a name="l00290"></a>00290 
<a name="l00300"></a>00300     <span class="keyword">protected</span>: int32_t <a class="code" href="classvrt_1_1NetIO.html#ad45a69033e49f98250a4d37c45888be6" title="Read from TCP socket with special handling for socket errors.">_tcpSocketRead</a> (<span class="keywordtype">void</span> *buf, int32_t off, int32_t len, <span class="keywordtype">bool</span> required);
<a name="l00301"></a>00301   };
<a name="l00302"></a>00302 } END_NAMESPACE
<a name="l00303"></a>00303 <span class="preprocessor">#endif </span><span class="comment">/* _NetIO_h */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 29 Jun 2018 for VRT by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
