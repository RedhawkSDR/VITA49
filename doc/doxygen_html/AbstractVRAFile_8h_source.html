<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VRT: cpp_src/vrt/lib/AbstractVRAFile.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_a3ee2da6a7acd12cfebd7023a400e49c.html">cpp_src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_8681eeff97ce1dcaa2c2dd525f1d5b83.html">vrt</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4cbb2aeb8e883b102012504fe756c455.html">lib</a>
  </div>
</div>
<div class="contents">
<h1>AbstractVRAFile.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ===================== COPYRIGHT NOTICE =====================</span>
<a name="l00002"></a>00002 <span class="comment"> * This file is protected by Copyright. Please refer to the COPYRIGHT file</span>
<a name="l00003"></a>00003 <span class="comment"> * distributed with this source distribution.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This file is part of REDHAWK.</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * REDHAWK is free software: you can redistribute it and/or modify it</span>
<a name="l00008"></a>00008 <span class="comment"> * under the terms of the GNU Lesser General Public License as published by the</span>
<a name="l00009"></a>00009 <span class="comment"> * Free Software Foundation, either version 3 of the License, or (at your</span>
<a name="l00010"></a>00010 <span class="comment"> * option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * REDHAWK is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00013"></a>00013 <span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<a name="l00014"></a>00014 <span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * for more details.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00018"></a>00018 <span class="comment"> * along with this program. If not, see http://www.gnu.org/licenses/.</span>
<a name="l00019"></a>00019 <span class="comment"> * ============================================================</span>
<a name="l00020"></a>00020 <span class="comment"> */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#ifndef _AbstractVRAFile_h</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define _AbstractVRAFile_h</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#include &quot;BasicVRLFrame.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;BasicVRTPacket.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;PacketIterator.h&quot;</span>
<a name="l00027"></a>00027 
<a name="l00031"></a>00031 <span class="preprocessor">#ifndef EOF</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor"># define EOF -1</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor"># if EOF != -1</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#  error &quot;Incompatible definition of EOF (EOF != -1)&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00039"></a>00039 <span class="keyword">namespace </span>vrt {
<a name="l00053"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html">00053</a>   <span class="keyword">class </span><a class="code" href="classvrt_1_1AbstractVRAFile.html" title="Defines a VRA file type.">AbstractVRAFile</a> : <span class="keyword">public</span> <a class="code" href="classvrt_1_1VRTObject.html" title="A basic root-level object definition.">VRTObject</a>, <span class="keyword">public</span> <a class="code" href="classvrt_1_1PacketContainer.html" title="Internal Use Only: Identifies a container for VRT packets that can be iterated over...">PacketContainer</a> {
<a name="l00059"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#abb091113c86906f1a47d696b5fe5467d">00059</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int8_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#abb091113c86906f1a47d696b5fe5467d" title="The minimum file version supported by this version of the library.">MIN_VERSION_SUPPORTED</a> = 1;
<a name="l00060"></a>00060 
<a name="l00066"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#aad85aa2674f0a39078694664077e2b3a">00066</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int8_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#aad85aa2674f0a39078694664077e2b3a" title="The maximum file version supported by this version of the library.">MAX_VERSION_SUPPORTED</a> = 1;
<a name="l00067"></a>00067 
<a name="l00073"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a75e6f1eb4ffe27dcc3716549b4b17331">00073</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int8_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a75e6f1eb4ffe27dcc3716549b4b17331" title="The default file version used for a new output file.">DEFAULT_VERSION</a> = 1;
<a name="l00074"></a>00074 
<a name="l00080"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#af4b99f789d71a458cc98944a2d23edf6">00080</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#af4b99f789d71a458cc98944a2d23edf6" title="The file name extension for a VRA file.">FILE_NAME_EXT</a>;
<a name="l00081"></a>00081 
<a name="l00087"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#acdded631778d07fecaf3bb762120a15e">00087</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#acdded631778d07fecaf3bb762120a15e" title="The MIME type for a VRA file.">MIME_TYPE</a>;
<a name="l00088"></a>00088 
<a name="l00094"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#aa633149adb95f00da874157d8c580b93">00094</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int32_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#aa633149adb95f00da874157d8c580b93" title="The length of the header in bytes.">HEADER_LENGTH</a> = 20;
<a name="l00095"></a>00095 
<a name="l00101"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a914d621da9c901d271d9b64d4087b69c">00101</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int32_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a914d621da9c901d271d9b64d4087b69c" title="The length of the trailer in bytes.">TRAILER_LENGTH</a> = 0;
<a name="l00102"></a>00102 
<a name="l00113"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a9bd57b3fc395785b7f762f86194aaca8">00113</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int64_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a9bd57b3fc395785b7f762f86194aaca8" title="The maximum length of the file in bytes (header + payload + trailer).">MAX_FILE_LENGTH</a> = __INT64_C(0x7FFFFFFFFFFFFFFF);
<a name="l00114"></a>00114 
<a name="l00123"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a79cf0285d276588e2b0ef1d7b1705227">00123</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int64_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a79cf0285d276588e2b0ef1d7b1705227" title="The minimum length of the file in bytes (header + no payload).">MIN_FILE_LENGTH</a> = <a class="code" href="classvrt_1_1AbstractVRAFile.html#aa633149adb95f00da874157d8c580b93" title="The length of the header in bytes.">HEADER_LENGTH</a> + <a class="code" href="classvrt_1_1AbstractVRAFile.html#a914d621da9c901d271d9b64d4087b69c" title="The length of the trailer in bytes.">TRAILER_LENGTH</a>;
<a name="l00124"></a>00124 
<a name="l00130"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a520b0eea51b6d7ebc5ed40683802491c">00130</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> int64_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a520b0eea51b6d7ebc5ed40683802491c" title="The maximum length of the payload in bytes.">MAX_PAYLOAD_LENGTH</a> = <a class="code" href="classvrt_1_1AbstractVRAFile.html#a9bd57b3fc395785b7f762f86194aaca8" title="The maximum length of the file in bytes (header + payload + trailer).">MAX_FILE_LENGTH</a> - <a class="code" href="classvrt_1_1AbstractVRAFile.html#aa633149adb95f00da874157d8c580b93" title="The length of the header in bytes.">HEADER_LENGTH</a> - <a class="code" href="classvrt_1_1AbstractVRAFile.html#a914d621da9c901d271d9b64d4087b69c" title="The length of the trailer in bytes.">TRAILER_LENGTH</a>;
<a name="l00131"></a>00131 
<a name="l00138"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a1609004a20120929a4c4caf3a6a763fa">00138</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a1609004a20120929a4c4caf3a6a763fa" title="This is the 32-bit FWA (frame alignment word) marking the start of a VRAF file.">VRA_FAW</a> = 0x56524146;
<a name="l00139"></a>00139 
<a name="l00141"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#af9c25edf094d87ccc52d861dc0a66e57">00141</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#af9c25edf094d87ccc52d861dc0a66e57" title="This is the 1st recorded byte of the 32-bit FWA (VRA_FAW).">VRA_FAW_0</a> = 0x56;
<a name="l00143"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a9054017bbe1b54500cc981c8dca7d587">00143</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a9054017bbe1b54500cc981c8dca7d587" title="This is the 2nd recorded byte of the 32-bit FWA (VRA_FAW).">VRA_FAW_1</a> = 0x52;
<a name="l00145"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a252f7b69d79c055f881225be74aa70d3">00145</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a252f7b69d79c055f881225be74aa70d3" title="This is the 3rd recorded byte of the 32-bit FWA (VRA_FAW).">VRA_FAW_2</a> = 0x41;
<a name="l00147"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a032c11cb21f20d7dd417f9b6f549f89c">00147</a>     <span class="keyword">public</span>: <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a032c11cb21f20d7dd417f9b6f549f89c" title="This is the 4th recorded byte of the 32-bit FWA (VRA_FAW).">VRA_FAW_3</a> = 0x46;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="keyword">private</span>:   <span class="keywordtype">char</span>     header[<a class="code" href="classvrt_1_1AbstractVRAFile.html#aa633149adb95f00da874157d8c580b93" title="The length of the header in bytes.">HEADER_LENGTH</a>];        <span class="comment">// A copy of the header</span>
<a name="l00150"></a>00150     <span class="keyword">private</span>:   int32_t  hdrVersion;    <span class="comment">// Local copy of file version (from header)</span>
<a name="l00151"></a>00151     <span class="keyword">private</span>:   int64_t  hdrFileLength; <span class="comment">// Local copy of file size    (from header)</span>
<a name="l00152"></a>00152     <span class="keyword">private</span>:   int32_t  hdrCRC;        <span class="comment">// Local copy of CRC          (from header)</span>
<a name="l00153"></a>00153     <span class="keyword">protected</span>: <span class="keywordtype">string</span>   uri;           <span class="comment">// The URI for the file (null if n/a).</span>
<a name="l00154"></a>00154     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>     isRead;        <span class="comment">// Is the file being opened for reading?</span>
<a name="l00155"></a>00155     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>     isWrite;       <span class="comment">// Is the file being opened for writing?</span>
<a name="l00156"></a>00156     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>     isSetSize;     <span class="comment">// Should the size be set on write?</span>
<a name="l00157"></a>00157     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>     isSetCRC;      <span class="comment">// Should the CRC  be set on write?</span>
<a name="l00158"></a>00158     <span class="keyword">protected</span>: <span class="keywordtype">bool</span>     isStrict;      <span class="comment">// Should strict packet checks be used on write?</span>
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 
<a name="l00162"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#ada8fb7922962d5afb29fb3108e39d0f8">00162</a>     <span class="keyword">public</span>: <a class="code" href="classvrt_1_1AbstractVRAFile.html#ada8fb7922962d5afb29fb3108e39d0f8" title="Basic destructor for the class.">~AbstractVRAFile</a> () { }
<a name="l00163"></a>00163 
<a name="l00165"></a>00165     <span class="keyword">public</span>: <a class="code" href="classvrt_1_1AbstractVRAFile.html#a582aea6e330c901200357017ada87d9d" title="Basic copy constructor for the class.">AbstractVRAFile</a> (<span class="keyword">const</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html" title="Defines a VRA file type.">AbstractVRAFile</a> &amp;f);
<a name="l00166"></a>00166 
<a name="l00176"></a>00176     <span class="keyword">protected</span>: <a class="code" href="classvrt_1_1AbstractVRAFile.html#a582aea6e330c901200357017ada87d9d" title="Basic copy constructor for the class.">AbstractVRAFile</a> (<span class="keywordtype">string</span> _uri, <span class="keywordtype">bool</span> _isRead,    <span class="keywordtype">bool</span> _isWrite,
<a name="l00177"></a>00177                                              <span class="keywordtype">bool</span> _isSetSize, <span class="keywordtype">bool</span> _isSetCRC,
<a name="l00178"></a>00178                                              <span class="keywordtype">bool</span> _isStrict);
<a name="l00179"></a>00179 
<a name="l00184"></a>00184     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a83b0a5cb8cca2c8bf9936c96d7ab206d" title="Gets a free-form description of the file.">toString</a> () <span class="keyword">const</span>;
<a name="l00185"></a>00185 
<a name="l00189"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a0be1f6f1550f5b589c370f2b27f6a303">00189</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> <span class="keywordtype">string</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a0be1f6f1550f5b589c370f2b27f6a303" title="Gets the URI for the file.">getURI</a> ()<span class="keyword"> const </span>{
<a name="l00190"></a>00190       <span class="keywordflow">return</span> uri;
<a name="l00191"></a>00191     }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193     <span class="keyword">using</span> <a class="code" href="classvrt_1_1VRTObject.html#a2f18f4efc73c423629510033039536fc" title="Tests this object for equality with another one.">VRTObject::equals</a>;
<a name="l00207"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#ada755b30b2b051b92805904f0af7d0ff">00207</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#ada755b30b2b051b92805904f0af7d0ff" title="Checks for equality with an unknown object.">equals</a> (<span class="keyword">const</span> <a class="code" href="classvrt_1_1VRTObject.html" title="A basic root-level object definition.">VRTObject</a> &amp;o)<span class="keyword"> const </span>{
<a name="l00208"></a>00208       <span class="keywordflow">try</span> {
<a name="l00209"></a>00209         <span class="keywordflow">return</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#ada755b30b2b051b92805904f0af7d0ff" title="Checks for equality with an unknown object.">equals</a>(*checked_dynamic_cast&lt;const AbstractVRAFile*&gt;(&amp;o));
<a name="l00210"></a>00210       }
<a name="l00211"></a>00211       <span class="keywordflow">catch</span> (<a class="code" href="classvrt_1_1VRTException.html" title="A basic exception definition.">VRTException</a> e) {
<a name="l00212"></a>00212         UNUSED_VARIABLE(e);
<a name="l00213"></a>00213         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00214"></a>00214       }
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216 
<a name="l00218"></a>00218     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#ada755b30b2b051b92805904f0af7d0ff" title="Checks for equality with an unknown object.">equals</a> (<span class="keyword">const</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html" title="Defines a VRA file type.">AbstractVRAFile</a> &amp;f) <span class="keyword">const</span>;
<a name="l00219"></a>00219 
<a name="l00227"></a>00227     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#adbef7130de65095cdb7d7953db8bb4e7" title="Checks to see if the file is valid.">isFileValid</a> () <span class="keyword">const</span>;
<a name="l00228"></a>00228 
<a name="l00235"></a>00235     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#adbef7130de65095cdb7d7953db8bb4e7" title="Checks to see if the file is valid.">isFileValid</a> (int64_t length) <span class="keyword">const</span>;
<a name="l00236"></a>00236 
<a name="l00241"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#afae7b86e0481061e03d26882c06d3ab0">00241</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#afae7b86e0481061e03d26882c06d3ab0" title="Checks to see if the CRC for the frame is valid.">isCRCValid</a> ()<span class="keyword"> const </span>{
<a name="l00242"></a>00242       <span class="keywordflow">return</span> (hdrCRC==<a class="code" href="classvrt_1_1BasicVRLFrame.html#afcb1723c47875d18f590908170f1eb6d" title="This is the special code that can be used in place of the CRC32 in cases where a...">BasicVRLFrame::NO_CRC</a>) || (hdrCRC==computeCRC());
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244 
<a name="l00250"></a>00250     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a53b4848893d80274d249607bf5b09a89" title="This will compute the CRC value for the file and set it in the CRC field.">updateCRC</a> ();
<a name="l00251"></a>00251 
<a name="l00257"></a>00257     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a8bbcf9d45583d603b93aab65faa10da3" title="This will compute the length of the file and set it in the FileLength field.">updateFileLength</a> ();
<a name="l00258"></a>00258 
<a name="l00260"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#ab5e7701f58addbb06f5cc239acc9921e">00260</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> int32_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#ab5e7701f58addbb06f5cc239acc9921e" title="Gets the file version.">getVersion</a> ()<span class="keyword"> const </span>{
<a name="l00261"></a>00261       <span class="keywordflow">return</span> hdrVersion;
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263 
<a name="l00270"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#afde0c06835462aefa93533f6ff377522">00270</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#afde0c06835462aefa93533f6ff377522" title="Optional functionality: Sets the file version.">setVersion</a> (int32_t version) {
<a name="l00271"></a>00271       <span class="keywordflow">if</span> (_setVersion(version)) {
<a name="l00272"></a>00272         <a class="code" href="classvrt_1_1AbstractVRAFile.html#ae34e74cdad67f2dc99c0d0458142e625" title="Write the header to disk.">writeHeader</a>();
<a name="l00273"></a>00273       }
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 
<a name="l00279"></a>00279     <span class="keyword">public</span>: <span class="keyword">virtual</span> int64_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a0213c800ae24579a77d67a8f152b6bb9" title="Gets the total length of the file in bytes including the header and trailer.">getFileLength</a> () <span class="keyword">const</span>;
<a name="l00280"></a>00280 
<a name="l00288"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#ad911a5d494ec3e913cfbc285d0869ea4">00288</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span>* <a class="code" href="classvrt_1_1AbstractVRAFile.html#ad911a5d494ec3e913cfbc285d0869ea4" title="Internal Use Only: Gets a copy of the VRA header.">getHeaderPointer</a> () {
<a name="l00289"></a>00289       <span class="keywordflow">return</span> header;
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="keyword">public</span>: <span class="keyword">virtual</span> <a class="code" href="classvrt_1_1ConstPacketIterator.html" title="Provides iteration capabilities over a given PacketContainer.">ConstPacketIterator</a> <a class="code" href="classvrt_1_1AbstractVRAFile.html#aaa1b879f6aac3e90f6b74a6ba02a6081" title="Gets an iterator over the packets in the container.">begin</a> () <span class="keyword">const</span>;
<a name="l00293"></a>00293     <span class="keyword">public</span>: <span class="keyword">virtual</span> <a class="code" href="classvrt_1_1ConstPacketIterator.html" title="Provides iteration capabilities over a given PacketContainer.">ConstPacketIterator</a> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a9dccfe79720a9a7d37fb8056dfbc2865" title="Gets an iterator pointing to one position past the end of the packets in the container...">end</a> () <span class="keyword">const</span>;
<a name="l00294"></a>00294     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span>                <a class="code" href="classvrt_1_1AbstractVRAFile.html#af079f3828ba10e0704a15894dd683344" title="Internal Use Only: Called by the iterator to determine if there is a next packet...">gotoNextPacket</a> (<a class="code" href="classvrt_1_1ConstPacketIterator.html" title="Provides iteration capabilities over a given PacketContainer.">ConstPacketIterator</a> &amp;pi) <span class="keyword">const</span>;
<a name="l00295"></a>00295     <span class="keyword">public</span>: <span class="keyword">virtual</span> <a class="code" href="classvrt_1_1BasicVRTPacket.html" title="A basic but full-featured implementation of BasicVRTPacket.">BasicVRTPacket</a>*     <a class="code" href="classvrt_1_1AbstractVRAFile.html#adf3f32b0c834049a2c5dc7e5bd186365" title="Internal Use Only: Called by the iterator to get the next packet beginning at the...">getThisPacket</a> (<a class="code" href="classvrt_1_1ConstPacketIterator.html" title="Provides iteration capabilities over a given PacketContainer.">ConstPacketIterator</a> &amp;pi, <span class="keywordtype">bool</span> skip)
<a name="l00296"></a>00296                                           <span class="keyword">const</span> __attribute__((warn_unused_result));
<a name="l00297"></a>00297 
<a name="l00302"></a>00302     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a4a195c6cf00b8ca63f327c8cc5730882" title="Optional functionality: Appends a VRTPacket to the end of the file.">append</a> (<a class="code" href="classvrt_1_1BasicVRTPacket.html" title="A basic but full-featured implementation of BasicVRTPacket.">BasicVRTPacket</a> &amp;p);
<a name="l00303"></a>00303 
<a name="l00307"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a25de66b68a462b41231fc44f9020125c">00307</a>     <span class="keyword">public</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a25de66b68a462b41231fc44f9020125c" title="Flushes this file by writing any buffered output to the underlying stream.">flush</a> () {
<a name="l00308"></a>00308       <a class="code" href="classvrt_1_1AbstractVRAFile.html#a25de66b68a462b41231fc44f9020125c" title="Flushes this file by writing any buffered output to the underlying stream.">flush</a>(<span class="keyword">true</span>);
<a name="l00309"></a>00309     }
<a name="l00310"></a>00310 
<a name="l00314"></a>00314     <span class="keyword">public</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a2cb00feb121c098de68fd45f4a308008" title="Closes this file and releases any system resources associated with it.">close</a> ();
<a name="l00315"></a>00315 
<a name="l00320"></a>00320     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#ab4c082f25a14becfeefa4bd3e4f1a023" title="Opens the file.">open</a> ();
<a name="l00321"></a>00321 
<a name="l00323"></a>00323     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a11390cd52b0a3ab1de8d0a3895fa5165" title="Reads the header in.">readHeader</a> ();
<a name="l00324"></a>00324 
<a name="l00326"></a>00326     <span class="keyword">private</span>: <span class="keywordtype">bool</span> isFileValid0 () <span class="keyword">const</span>;
<a name="l00327"></a>00327 
<a name="l00329"></a>00329     <span class="keyword">private</span>: int32_t computeCRC () <span class="keyword">const</span>;
<a name="l00330"></a>00330 
<a name="l00335"></a>00335     <span class="keyword">private</span>: <span class="keywordtype">bool</span> _setVersion (int32_t ver);
<a name="l00336"></a>00336 
<a name="l00338"></a>00338     <span class="keyword">protected</span>: <span class="keyword">virtual</span> int64_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a02555995dcd94a1b29355cf4a6faa5bd" title="Gets the file length from the O/S or -1 if unknown.">getFileLengthOS</a> () <span class="keyword">const</span> = 0;
<a name="l00339"></a>00339 
<a name="l00345"></a>00345     <span class="keyword">protected</span>: <span class="keyword">virtual</span> int64_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#a831d4c5c6ed921b4e9bceca10fef029e" title="Gets the read/write length.">getFileLengthRW</a> () <span class="keyword">const</span> = 0;
<a name="l00346"></a>00346 
<a name="l00348"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#af4cfb1ea0a90f7bab4865689303b8885">00348</a>     <span class="keyword">protected</span>: <span class="keyword">inline</span> int64_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#af4cfb1ea0a90f7bab4865689303b8885" title="Gets the file length from the header (0 if unspecified).">getFileLengthHeader</a> ()<span class="keyword"> const </span>{
<a name="l00349"></a>00349       <span class="keywordflow">return</span> hdrFileLength;
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 
<a name="l00355"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#af3aa24057ae616f4f166205685af3e60">00355</a>     <span class="keyword">protected</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#af3aa24057ae616f4f166205685af3e60" title="Sets the file length in the header (0 if unspecified).">setFileLengthHeader</a> (int64_t len) {
<a name="l00356"></a>00356       <span class="keywordflow">if</span> (_setFileLengthHeader(len)) {
<a name="l00357"></a>00357         <a class="code" href="classvrt_1_1AbstractVRAFile.html#ae34e74cdad67f2dc99c0d0458142e625" title="Write the header to disk.">writeHeader</a>();
<a name="l00358"></a>00358       }
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00365"></a>00365     <span class="keyword">private</span>: <span class="keywordtype">bool</span> _setFileLengthHeader (int64_t len);
<a name="l00366"></a>00366 
<a name="l00370"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#ae609a099ebc2c9f1dd924eea325a3ee5">00370</a>     <span class="keyword">protected</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#ae609a099ebc2c9f1dd924eea325a3ee5" title="Sets the CRC in the header.">setCRC</a> (int32_t crc) {
<a name="l00371"></a>00371       <span class="keywordflow">if</span> (_setCRC(crc)) {
<a name="l00372"></a>00372         <a class="code" href="classvrt_1_1AbstractVRAFile.html#ae34e74cdad67f2dc99c0d0458142e625" title="Write the header to disk.">writeHeader</a>();
<a name="l00373"></a>00373       }
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375 
<a name="l00380"></a>00380     <span class="keyword">private</span>: <span class="keywordtype">bool</span> _setCRC (int32_t crc);
<a name="l00381"></a>00381 
<a name="l00383"></a>00383     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#ae34e74cdad67f2dc99c0d0458142e625" title="Write the header to disk.">writeHeader</a> ();
<a name="l00384"></a>00384 
<a name="l00390"></a>00390     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a25de66b68a462b41231fc44f9020125c" title="Flushes this file by writing any buffered output to the underlying stream.">flush</a> (<span class="keywordtype">bool</span> force);
<a name="l00391"></a>00391 
<a name="l00399"></a>00399     <span class="keyword">protected</span>: <span class="keyword">virtual</span> int32_t <a class="code" href="classvrt_1_1AbstractVRAFile.html#acb4f1c7e51b798975c999c008471979e" title="Reads from the file.">read</a> (int64_t off, <span class="keywordtype">void</span> *ptr, int32_t len) <span class="keyword">const</span> = 0;
<a name="l00400"></a>00400 
<a name="l00407"></a><a class="code" href="classvrt_1_1AbstractVRAFile.html#a941c8fca9ecf0a35081077176ed090ed">00407</a>     <span class="keyword">protected</span>: <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a941c8fca9ecf0a35081077176ed090ed" title="Writes to the file.">write</a> (int64_t off, <span class="keywordtype">void</span> *ptr, int32_t len) {
<a name="l00408"></a>00408       <a class="code" href="classvrt_1_1AbstractVRAFile.html#a941c8fca9ecf0a35081077176ed090ed" title="Writes to the file.">write</a>(off, ptr, len, <span class="keyword">true</span>);
<a name="l00409"></a>00409     }
<a name="l00410"></a>00410 
<a name="l00419"></a>00419     <span class="keyword">protected</span>: <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a941c8fca9ecf0a35081077176ed090ed" title="Writes to the file.">write</a> (int64_t off, <span class="keywordtype">void</span> *ptr, int32_t len, <span class="keywordtype">bool</span> <a class="code" href="classvrt_1_1AbstractVRAFile.html#a25de66b68a462b41231fc44f9020125c" title="Flushes this file by writing any buffered output to the underlying stream.">flush</a>) = 0;
<a name="l00420"></a>00420   };
<a name="l00421"></a>00421 } END_NAMESPACE
<a name="l00422"></a>00422 <span class="preprocessor">#endif </span><span class="comment">/* _AbstractVRAFile_h */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 7 Mar 2018 for VRT by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
